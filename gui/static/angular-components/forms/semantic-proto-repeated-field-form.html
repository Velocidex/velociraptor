<div>

  field {{ field }}


  <div class="form-group">
    <label class="control-label" title="{$ field.doc $}">
      {$  field.friendly_name || field.name $}
      <a ng-if="field.context_help_url"
         ng-href="/help/{$ field.context_help_url $}" target="_blank">
        <i class="glyphicon glyphicon-question-sign"></i>
      </a>
    </label>

    <div class="controls">
      <button class="btn btn-default form-add" name="Add"
              ng-click="controller.addItem()">
        <i class="glyphicon glyphicon-plus"></i>
      </button>
    </div>
  </div>

  <!-- Strings must be tracked by $index
       since they can not have an $id -->
  <div ng-repeat="item in value track by $index"
       ng-if="field.type=='string'">
    <button type="button" class="control-label close" name="Remove"
            ng-click="controller.removeItem($index)">&times;</button>
    <div class="controls">
      <div class="form-group">
        <grr-form-value value="value[$index]"
                        default="field.default"
                        type="{$ field.type $}"
                        ></grr-form-value>
      </div>
    </div>
  </div>

  <div ng-repeat="item in value track by $id(item)"
       ng-if="field.type!='string'">
    <button type="button" class="control-label close" name="Remove"
            ng-click="controller.removeItem($index)">&times;</button>
    <div class="controls">
      <div class="form-group">
        <grr-form-value value="value[$index]"
                        default="field.default"
                        type="{$ field.type $}"
                        ></grr-form-value>
      </div>
    </div>
  </div>
</div>
